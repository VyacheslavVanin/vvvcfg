/*
 *  This file was generated by cfsmgen script.
 *  See www.github.com/VyacheslavVanin/cfmgen.git 
 */

#include "dncfg_node_fsm.h"

const char* dncfg_node_state_names[] = {
    "START",
    "ERROR",
    "START_SPACE",
    "NODE",
    "PROP",
    "REF",
    "NODE_EQ",
    "NODE_NUMBER",
    "NODE_EQ_STR",
    "VALUE",
    "LIST",
    "DICT",
    "DICT_KEY",
    "DICT_NEXT",
    "LIST_NEXT",
    "DICT_COLON",
    "DICT_KEY_STRING",
    "DICT_KEY_NUMBER",
    "LIST_STR",
    "LIST_FULL",
    "PROP_EQ",
    "PROP_COMMA",
    "PROP_EQ_STR",
    "PROP_EQ_NUM",
    "PROP_EQ_REF"
};

void dncfg_node_step(dncfg_node_ctx_t* ctx)
{
    const DNCFG_NODE_STATE state = ctx->state;
    dncfg_node_data_t* data = ctx->data;

    switch(state) {
    case DNCFG_NODE_START: 
        if (dncfg_node_is_newline(data)) {
            inc_line_count(data);
            break;
        }
        if (dncfg_node_is_linecount(data)) {
            inc_line_count(data);
            break;
        }
        if (dncfg_node_is_space(data)) {
            setup_lvl(data);
            ctx->state = DNCFG_NODE_START_SPACE;
            break;
        }
        if (dncfg_node_is_name(data)) {
            reset_lvl(data);
            add_subnode(data);
            ctx->state = DNCFG_NODE_NODE;
            break;
        }
        on_invalid_token(data);
        ctx->state = DNCFG_NODE_ERROR;
    break;
    case DNCFG_NODE_ERROR: 
    break;
    case DNCFG_NODE_START_SPACE: 
        if (dncfg_node_is_newline(data)) {
            inc_line_count(data);
            ctx->state = DNCFG_NODE_START;
            break;
        }
        if (dncfg_node_is_name(data)) {
            add_subnode(data);
            ctx->state = DNCFG_NODE_NODE;
            break;
        }
        on_invalid_token(data);
        ctx->state = DNCFG_NODE_ERROR;
    break;
    case DNCFG_NODE_NODE: 
        if (dncfg_node_is_linecount(data)) {
            inc_line_count(data);
            break;
        }
        if (dncfg_node_is_newline(data)) {
            inc_line_count(data);
            ctx->state = DNCFG_NODE_START;
            break;
        }
        if (dncfg_node_is_name(data)) {
            add_prop_name(data);
            ctx->state = DNCFG_NODE_PROP;
            break;
        }
        if (dncfg_node_is_ref(data)) {
            add_ref(data);
            ctx->state = DNCFG_NODE_REF;
            break;
        }
        if (dncfg_node_is_eq(data)) {
            ctx->state = DNCFG_NODE_NODE_EQ;
            break;
        }
        on_invalid_token(data);
        ctx->state = DNCFG_NODE_ERROR;
    break;
    case DNCFG_NODE_PROP: 
        if (dncfg_node_is_newline(data)) {
            inc_line_count(data);
            ctx->state = DNCFG_NODE_START;
            break;
        }
        if (dncfg_node_is_linecount(data)) {
            inc_line_count(data);
            break;
        }
        if (dncfg_node_is_eq(data)) {
            ctx->state = DNCFG_NODE_PROP_EQ;
            break;
        }
        if (dncfg_node_is_comma(data)) {
            ctx->state = DNCFG_NODE_PROP_COMMA;
            break;
        }
        if (dncfg_node_is_name(data)) {
            add_prop_name(data);
            break;
        }
        on_invalid_token(data);
        ctx->state = DNCFG_NODE_ERROR;
    break;
    case DNCFG_NODE_REF: 
        if (dncfg_node_is_newline(data)) {
            inc_line_count(data);
            ctx->state = DNCFG_NODE_START;
            break;
        }
        if (dncfg_node_is_comma(data)) {
            ctx->state = DNCFG_NODE_PROP_COMMA;
            break;
        }
        if (dncfg_node_is_linecount(data)) {
            inc_line_count(data);
            break;
        }
        if (dncfg_node_is_name(data)) {
            add_prop_name(data);
            ctx->state = DNCFG_NODE_PROP;
            break;
        }
        on_invalid_token(data);
        ctx->state = DNCFG_NODE_ERROR;
    break;
    case DNCFG_NODE_NODE_EQ: 
        if (dncfg_node_is_linecount(data)) {
            inc_line_count(data);
            break;
        }
        if (dncfg_node_is_number(data)) {
            add_value_number(data);
            ctx->state = DNCFG_NODE_NODE_NUMBER;
            break;
        }
        if (dncfg_node_is_string(data)) {
            add_value_str(data);
            ctx->state = DNCFG_NODE_NODE_EQ_STR;
            break;
        }
        if (dncfg_node_is_name(data)) {
            add_value_number(data);
            ctx->state = DNCFG_NODE_NODE_NUMBER;
            break;
        }
        if (dncfg_node_is_open_square_br(data)) {
            set_value_dst_node(data);
            node_putback(data);
            ctx->state = DNCFG_NODE_VALUE;
            break;
        }
        if (dncfg_node_is_open_curly_br(data)) {
            set_value_dst_node(data);
            node_putback(data);
            ctx->state = DNCFG_NODE_VALUE;
            break;
        }
        if (dncfg_node_is_ref(data)) {
            add_ref(data);
            ctx->state = DNCFG_NODE_REF;
            break;
        }
        on_invalid_token(data);
        ctx->state = DNCFG_NODE_ERROR;
    break;
    case DNCFG_NODE_NODE_NUMBER: 
        if (dncfg_node_is_newline(data)) {
            inc_line_count(data);
            ctx->state = DNCFG_NODE_START;
            break;
        }
        if (dncfg_node_is_name(data)) {
            add_prop_name(data);
            ctx->state = DNCFG_NODE_PROP;
            break;
        }
        if (dncfg_node_is_ref(data)) {
            add_ref(data);
            ctx->state = DNCFG_NODE_REF;
            break;
        }
        if (dncfg_node_is_eq(data)) {
            ctx->state = DNCFG_NODE_NODE_EQ;
            break;
        }
        on_invalid_token(data);
        ctx->state = DNCFG_NODE_ERROR;
    break;
    case DNCFG_NODE_NODE_EQ_STR: 
        if (dncfg_node_is_linecount(data)) {
            inc_line_count(data);
            break;
        }
        if (dncfg_node_is_string(data)) {
            add_value_str(data);
            break;
        }
        if (dncfg_node_is_newline(data)) {
            inc_line_count(data);
            ctx->state = DNCFG_NODE_START;
            break;
        }
        if (dncfg_node_is_name(data)) {
            add_prop_name(data);
            ctx->state = DNCFG_NODE_PROP;
            break;
        }
        if (dncfg_node_is_ref(data)) {
            add_ref(data);
            ctx->state = DNCFG_NODE_REF;
            break;
        }
        if (dncfg_node_is_eq(data)) {
            ctx->state = DNCFG_NODE_NODE_EQ;
            break;
        }
        on_invalid_token(data);
        ctx->state = DNCFG_NODE_ERROR;
    break;
    case DNCFG_NODE_VALUE: 
        if (dncfg_node_is_open_square_br(data)) {
            start_list(data);
            ctx->state = DNCFG_NODE_LIST;
            break;
        }
        if (dncfg_node_is_open_curly_br(data)) {
            start_dict(data);
            ctx->state = DNCFG_NODE_DICT;
            break;
        }
        on_invalid_token(data);
        ctx->state = DNCFG_NODE_ERROR;
    break;
    case DNCFG_NODE_LIST: 
        if (dncfg_node_is_linecount(data)) {
            inc_line_count(data);
            break;
        }
        if (dncfg_node_is_newline(data)) {
            inc_line_count(data);
            break;
        }
        if (dncfg_node_is_space(data)) {
            break;
        }
        if (dncfg_node_is_string(data)) {
            append_to_list(data);
            ctx->state = DNCFG_NODE_LIST_STR;
            break;
        }
        if (dncfg_node_is_name(data)) {
            append_to_list(data);
            ctx->state = DNCFG_NODE_LIST_FULL;
            break;
        }
        if (dncfg_node_is_number(data)) {
            append_to_list(data);
            ctx->state = DNCFG_NODE_LIST_FULL;
            break;
        }
        if (dncfg_node_is_ref(data)) {
            append_ref_to_list(data);
            ctx->state = DNCFG_NODE_LIST_FULL;
            break;
        }
        if (dncfg_node_is_open_square_br(data)) {
            push_list_to_value_stack(data);
            break;
        }
        if (dncfg_node_is_open_curly_br(data)) {
            push_dict_to_value_stack(data);
            ctx->state = DNCFG_NODE_DICT;
            break;
        }
        if (dncfg_node_is_close_square_br_prev_lvl_list(data)) {
            pop_value_stack(data);
            ctx->state = DNCFG_NODE_LIST_NEXT;
            break;
        }
        if (dncfg_node_is_close_square_br_prev_lvl_dict(data)) {
            pop_value_stack(data);
            ctx->state = DNCFG_NODE_DICT_NEXT;
            break;
        }
        if (dncfg_node_is_close_square_br_lvl_0_dst_node(data)) {
            commit_value(data);
            ctx->state = DNCFG_NODE_NODE;
            break;
        }
        if (dncfg_node_is_close_square_br_lvl_0_dst_prop(data)) {
            commit_value(data);
            ctx->state = DNCFG_NODE_PROP;
            break;
        }
        on_invalid_token(data);
        ctx->state = DNCFG_NODE_ERROR;
    break;
    case DNCFG_NODE_DICT: 
        if (dncfg_node_is_linecount(data)) {
            inc_line_count(data);
            break;
        }
        if (dncfg_node_is_newline(data)) {
            inc_line_count(data);
            break;
        }
        if (dncfg_node_is_space(data)) {
            break;
        }
        if (dncfg_node_is_string(data)) {
            dict_set_key(data);
            ctx->state = DNCFG_NODE_DICT_KEY;
            break;
        }
        if (dncfg_node_is_name(data)) {
            dict_set_key(data);
            ctx->state = DNCFG_NODE_DICT_KEY;
            break;
        }
        if (dncfg_node_is_number(data)) {
            dict_set_key(data);
            ctx->state = DNCFG_NODE_DICT_KEY;
            break;
        }
        if (dncfg_node_is_close_curly_br_prev_lvl_dict(data)) {
            pop_value_stack(data);
            ctx->state = DNCFG_NODE_DICT_NEXT;
            break;
        }
        if (dncfg_node_is_close_curly_br_prev_lvl_list(data)) {
            pop_value_stack(data);
            ctx->state = DNCFG_NODE_LIST_NEXT;
            break;
        }
        if (dncfg_node_is_close_curly_br_lvl_0_dst_node(data)) {
            commit_value(data);
            ctx->state = DNCFG_NODE_NODE;
            break;
        }
        if (dncfg_node_is_close_curly_br_lvl_0_dst_prop(data)) {
            commit_value(data);
            ctx->state = DNCFG_NODE_PROP;
            break;
        }
        on_invalid_token(data);
        ctx->state = DNCFG_NODE_ERROR;
    break;
    case DNCFG_NODE_DICT_KEY: 
        if (dncfg_node_is_colon(data)) {
            ctx->state = DNCFG_NODE_DICT_COLON;
            break;
        }
        on_invalid_token(data);
        ctx->state = DNCFG_NODE_ERROR;
    break;
    case DNCFG_NODE_DICT_NEXT: 
        if (dncfg_node_is_linecount(data)) {
            inc_line_count(data);
            break;
        }
        if (dncfg_node_is_newline(data)) {
            inc_line_count(data);
            break;
        }
        if (dncfg_node_is_space(data)) {
            break;
        }
        if (dncfg_node_is_comma(data)) {
            ctx->state = DNCFG_NODE_DICT;
            break;
        }
        if (dncfg_node_is_close_curly_br_prev_lvl_dict(data)) {
            pop_value_stack(data);
            break;
        }
        if (dncfg_node_is_close_curly_br_prev_lvl_list(data)) {
            pop_value_stack(data);
            ctx->state = DNCFG_NODE_LIST_NEXT;
            break;
        }
        if (dncfg_node_is_close_curly_br_lvl_0_dst_node(data)) {
            commit_value(data);
            ctx->state = DNCFG_NODE_NODE;
            break;
        }
        if (dncfg_node_is_close_curly_br_lvl_0_dst_prop(data)) {
            commit_value(data);
            ctx->state = DNCFG_NODE_PROP;
            break;
        }
        on_invalid_token(data);
        ctx->state = DNCFG_NODE_ERROR;
    break;
    case DNCFG_NODE_LIST_NEXT: 
        if (dncfg_node_is_linecount(data)) {
            inc_line_count(data);
            break;
        }
        if (dncfg_node_is_newline(data)) {
            inc_line_count(data);
            break;
        }
        if (dncfg_node_is_space(data)) {
            break;
        }
        if (dncfg_node_is_comma(data)) {
            ctx->state = DNCFG_NODE_LIST;
            break;
        }
        if (dncfg_node_is_close_square_br_prev_lvl_list(data)) {
            pop_value_stack(data);
            break;
        }
        if (dncfg_node_is_close_square_br_prev_lvl_dict(data)) {
            pop_value_stack(data);
            ctx->state = DNCFG_NODE_DICT_NEXT;
            break;
        }
        if (dncfg_node_is_close_square_br_lvl_0_dst_node(data)) {
            commit_value(data);
            ctx->state = DNCFG_NODE_NODE;
            break;
        }
        if (dncfg_node_is_close_square_br_lvl_0_dst_prop(data)) {
            commit_value(data);
            ctx->state = DNCFG_NODE_PROP;
            break;
        }
        on_invalid_token(data);
        ctx->state = DNCFG_NODE_ERROR;
    break;
    case DNCFG_NODE_DICT_COLON: 
        if (dncfg_node_is_string(data)) {
            dict_set_string_value(data);
            ctx->state = DNCFG_NODE_DICT_KEY_STRING;
            break;
        }
        if (dncfg_node_is_name(data)) {
            dict_set_string_value(data);
            ctx->state = DNCFG_NODE_DICT_KEY_NUMBER;
            break;
        }
        if (dncfg_node_is_number(data)) {
            dict_set_string_value(data);
            ctx->state = DNCFG_NODE_DICT_KEY_NUMBER;
            break;
        }
        if (dncfg_node_is_open_curly_br(data)) {
            dict_set_dict_value(data);
            ctx->state = DNCFG_NODE_DICT;
            break;
        }
        if (dncfg_node_is_open_square_br(data)) {
            dict_set_list_value(data);
            ctx->state = DNCFG_NODE_LIST;
            break;
        }
        on_invalid_token(data);
        ctx->state = DNCFG_NODE_ERROR;
    break;
    case DNCFG_NODE_DICT_KEY_STRING: 
        if (dncfg_node_is_string(data)) {
            append_string_to_dict_value(data);
            break;
        }
        if (dncfg_node_is_comma(data)) {
            pop_value_stack(data);
            ctx->state = DNCFG_NODE_DICT;
            break;
        }
        if (dncfg_node_is_close_curly_br_prev_lvl_dict(data)) {
            pop_value_stack(data);
            node_putback(data);
            ctx->state = DNCFG_NODE_DICT_NEXT;
            break;
        }
        if (dncfg_node_is_close_curly_br_prev_lvl_list(data)) {
            pop_value_stack(data);
            node_putback(data);
            ctx->state = DNCFG_NODE_LIST_NEXT;
            break;
        }
        if (dncfg_node_is_close_curly_br_lvl_0_dst_node(data)) {
            commit_value(data);
            ctx->state = DNCFG_NODE_NODE;
            break;
        }
        if (dncfg_node_is_close_curly_br_lvl_0_dst_prop(data)) {
            commit_value(data);
            ctx->state = DNCFG_NODE_PROP;
            break;
        }
        on_invalid_token(data);
        ctx->state = DNCFG_NODE_ERROR;
    break;
    case DNCFG_NODE_DICT_KEY_NUMBER: 
        if (dncfg_node_is_comma(data)) {
            pop_value_stack(data);
            ctx->state = DNCFG_NODE_DICT;
            break;
        }
        if (dncfg_node_is_close_curly_br_prev_lvl_dict(data)) {
            pop_value_stack(data);
            node_putback(data);
            ctx->state = DNCFG_NODE_DICT_NEXT;
            break;
        }
        if (dncfg_node_is_close_curly_br_prev_lvl_list(data)) {
            pop_value_stack(data);
            node_putback(data);
            ctx->state = DNCFG_NODE_LIST_NEXT;
            break;
        }
        if (dncfg_node_is_close_curly_br_lvl_0_dst_node(data)) {
            commit_value(data);
            ctx->state = DNCFG_NODE_NODE;
            break;
        }
        if (dncfg_node_is_close_curly_br_lvl_0_dst_prop(data)) {
            commit_value(data);
            ctx->state = DNCFG_NODE_PROP;
            break;
        }
        on_invalid_token(data);
        ctx->state = DNCFG_NODE_ERROR;
    break;
    case DNCFG_NODE_LIST_STR: 
        if (dncfg_node_is_linecount(data)) {
            inc_line_count(data);
            break;
        }
        if (dncfg_node_is_newline(data)) {
            inc_line_count(data);
            break;
        }
        if (dncfg_node_is_space(data)) {
            break;
        }
        if (dncfg_node_is_comma(data)) {
            ctx->state = DNCFG_NODE_LIST;
            break;
        }
        if (dncfg_node_is_string(data)) {
            append_to_last_in_list(data);
            break;
        }
        if (dncfg_node_is_close_square_br_prev_lvl_list(data)) {
            pop_value_stack(data);
            ctx->state = DNCFG_NODE_LIST_NEXT;
            break;
        }
        if (dncfg_node_is_close_square_br_prev_lvl_dict(data)) {
            pop_value_stack(data);
            ctx->state = DNCFG_NODE_DICT_NEXT;
            break;
        }
        if (dncfg_node_is_close_square_br_lvl_0_dst_node(data)) {
            commit_value(data);
            ctx->state = DNCFG_NODE_NODE;
            break;
        }
        if (dncfg_node_is_close_square_br_lvl_0_dst_prop(data)) {
            commit_value(data);
            ctx->state = DNCFG_NODE_PROP;
            break;
        }
        on_invalid_token(data);
        ctx->state = DNCFG_NODE_ERROR;
    break;
    case DNCFG_NODE_LIST_FULL: 
        if (dncfg_node_is_linecount(data)) {
            inc_line_count(data);
            break;
        }
        if (dncfg_node_is_newline(data)) {
            inc_line_count(data);
            break;
        }
        if (dncfg_node_is_space(data)) {
            break;
        }
        if (dncfg_node_is_comma(data)) {
            ctx->state = DNCFG_NODE_LIST;
            break;
        }
        if (dncfg_node_is_close_square_br_prev_lvl_list(data)) {
            pop_value_stack(data);
            ctx->state = DNCFG_NODE_LIST_NEXT;
            break;
        }
        if (dncfg_node_is_close_square_br_prev_lvl_dict(data)) {
            pop_value_stack(data);
            ctx->state = DNCFG_NODE_DICT_NEXT;
            break;
        }
        if (dncfg_node_is_close_square_br_lvl_0_dst_node(data)) {
            commit_value(data);
            ctx->state = DNCFG_NODE_NODE;
            break;
        }
        if (dncfg_node_is_close_square_br_lvl_0_dst_prop(data)) {
            commit_value(data);
            ctx->state = DNCFG_NODE_PROP;
            break;
        }
        on_invalid_token(data);
        ctx->state = DNCFG_NODE_ERROR;
    break;
    case DNCFG_NODE_PROP_EQ: 
        if (dncfg_node_is_linecount(data)) {
            inc_line_count(data);
            break;
        }
        if (dncfg_node_is_string(data)) {
            add_prop_value_str(data);
            ctx->state = DNCFG_NODE_PROP_EQ_STR;
            break;
        }
        if (dncfg_node_is_number(data)) {
            add_prop_value_number(data);
            ctx->state = DNCFG_NODE_PROP_EQ_NUM;
            break;
        }
        if (dncfg_node_is_name(data)) {
            add_prop_value_number(data);
            ctx->state = DNCFG_NODE_PROP_EQ_NUM;
            break;
        }
        if (dncfg_node_is_ref(data)) {
            add_prop_value_ref(data);
            ctx->state = DNCFG_NODE_PROP_EQ_REF;
            break;
        }
        if (dncfg_node_is_open_square_br(data)) {
            set_value_dst_prop(data);
            node_putback(data);
            ctx->state = DNCFG_NODE_VALUE;
            break;
        }
        on_invalid_token(data);
        ctx->state = DNCFG_NODE_ERROR;
    break;
    case DNCFG_NODE_PROP_COMMA: 
        if (dncfg_node_is_newline(data)) {
            inc_line_count(data);
            break;
        }
        if (dncfg_node_is_linecount(data)) {
            inc_line_count(data);
            break;
        }
        if (dncfg_node_is_name(data)) {
            add_prop_name(data);
            ctx->state = DNCFG_NODE_PROP;
            break;
        }
        if (dncfg_node_is_ref(data)) {
            add_ref(data);
            ctx->state = DNCFG_NODE_REF;
            break;
        }
        if (dncfg_node_is_space(data)) {
            ctx->state = DNCFG_NODE_NODE_NUMBER;
            break;
        }
        on_invalid_token(data);
        ctx->state = DNCFG_NODE_ERROR;
    break;
    case DNCFG_NODE_PROP_EQ_STR: 
        if (dncfg_node_is_newline(data)) {
            inc_line_count(data);
            ctx->state = DNCFG_NODE_START;
            break;
        }
        if (dncfg_node_is_linecount(data)) {
            inc_line_count(data);
            break;
        }
        if (dncfg_node_is_string(data)) {
            add_prop_value_str(data);
            break;
        }
        if (dncfg_node_is_comma(data)) {
            ctx->state = DNCFG_NODE_PROP_COMMA;
            break;
        }
        if (dncfg_node_is_name(data)) {
            add_prop_name(data);
            ctx->state = DNCFG_NODE_PROP;
            break;
        }
        on_invalid_token(data);
        ctx->state = DNCFG_NODE_ERROR;
    break;
    case DNCFG_NODE_PROP_EQ_NUM: 
        if (dncfg_node_is_newline(data)) {
            inc_line_count(data);
            ctx->state = DNCFG_NODE_START;
            break;
        }
        if (dncfg_node_is_comma(data)) {
            ctx->state = DNCFG_NODE_PROP_COMMA;
            break;
        }
        if (dncfg_node_is_linecount(data)) {
            break;
        }
        if (dncfg_node_is_name(data)) {
            add_prop_name(data);
            ctx->state = DNCFG_NODE_PROP;
            break;
        }
        on_invalid_token(data);
        ctx->state = DNCFG_NODE_ERROR;
    break;
    case DNCFG_NODE_PROP_EQ_REF: 
        if (dncfg_node_is_newline(data)) {
            inc_line_count(data);
            ctx->state = DNCFG_NODE_START;
            break;
        }
        if (dncfg_node_is_comma(data)) {
            ctx->state = DNCFG_NODE_PROP_COMMA;
            break;
        }
        if (dncfg_node_is_linecount(data)) {
            break;
        }
        if (dncfg_node_is_name(data)) {
            add_prop_name(data);
            ctx->state = DNCFG_NODE_PROP;
            break;
        }
        on_invalid_token(data);
        ctx->state = DNCFG_NODE_ERROR;
    break;
    }

}
